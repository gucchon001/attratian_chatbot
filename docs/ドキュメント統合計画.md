# ドキュメント統合計画: JSON階層フィルター機能

## 📋 統合方針: 参照連携型別出し

### **1. ドキュメント構成（更新後）**

```
docs/
├── 【既存】仕様書作成支援ボット 要件定義書.md         ← 更新
├── 【既存】仕様書作成支援ボット 外部インターフェース設計書.md ← 更新  
├── 【既存】仕様書作成支援ボット 画面設計書.md         ← 更新
├── 【既存】仕様書作成支援ボット テスト仕様書.md        ← 更新
├── 【既存】その他既存仕様書...
└── 【新規】JSON階層フィルター機能_仕様書.md          ← 別出し保持
```

### **2. 更新内容**

#### **A. 要件定義書の更新**
**追加セクション:**
```markdown
#### 3.1.2. JSON階層フィルター機能強化（v3.5追加）

**背景:**
Confluence4パラメータフィルターの性能課題（3-10秒の待機時間）を解決し、
ユーザビリティを大幅向上させる技術的改善を実施。

**概要:**
- APIリアルタイム取得 → JSONローカルファイル方式への変更
- 階層チェックボックスによる直感的フォルダ選択
- 削除・廃止ページの自動除外機能

**効果:**
- パフォーマンス: 30-100倍高速化（3-10秒 → 0.1秒以下）
- UX向上: 即座のフィルター操作、視覚的階層選択

**詳細仕様:** 
📄 [JSON階層フィルター機能_仕様書.md](./JSON階層フィルター機能_仕様書.md) を参照
```

#### **B. 画面設計書の更新**
**追加セクション:**
```markdown
### 2.3. Confluenceフィルター強化版 (v1.6追加)

**変更内容:**
- スペース・コンテンツタイプ選択の削除（シンプル化）
- 削除ページ除外オプションの追加
- 階層チェックボックスによるフォルダ選択

**UI更新:**
```
📚 Confluenceフィルター（簡素化）
├── 🗑️ フィルターオプション
│   ☐ 削除ページを含む
├── 📁 ページ階層フィルター     ← 新機能
└── 📅 日付フィルター
```

**詳細:** [JSON階層フィルター機能_仕様書.md](./JSON階層フィルター機能_仕様書.md#ui改善設計) 参照
```

#### **C. 外部インターフェース設計書の更新**
**追加セクション:**
```markdown
### EIF-06: JSON階層データインターフェース

| ID | 名称 | 対象システム | 概要 | 通信方式 |
|----|------|-------------|------|----------|
| EIF-06 | JSON階層データインターフェース | ローカルファイル | Confluenceページ階層のJSONデータ管理 | Local File |

**詳細仕様:** [JSON階層フィルター機能_仕様書.md](./JSON階層フィルター機能_仕様書.md#システム設計) を参照
```

#### **D. テスト仕様書の更新**
**追加テストケース:**
```markdown
| ST-04 | **削除ページフィルターシナリオ** | 階層選択で削除ページ除外を確認 |
| ST-05 | **階層フィルターシナリオ** | フォルダ選択による絞り込み確認 |

**詳細:** [JSON階層フィルター機能_仕様書.md](./JSON階層フィルター機能_仕様書.md#実装計画) を参照
```

### **3. 実装手順**

#### **Phase 1: 参照更新（1時間）**
- [ ] 要件定義書に参照セクション追加
- [ ] 画面設計書に新UIセクション追加  
- [ ] 外部インターフェース設計書にEIF-06追加
- [ ] テスト仕様書に新テストケース追加

#### **Phase 2: 相互参照整備（30分）**
- [ ] JSON階層フィルター仕様書に既存ドキュメント参照追加
- [ ] 各ドキュメント間のリンク整合性確認

### **4. メリット**

#### **別出しメリット:**
✅ **開発効率**: 実装チーム向けの詳細仕様として活用  
✅ **保守性**: 機能固有の仕様変更を独立管理  
✅ **可読性**: 既存ドキュメントの肥大化を防止  

#### **参照連携メリット:**
✅ **一貫性**: 全体仕様との整合性確保  
✅ **発見性**: 既存ドキュメントから新機能への導線  
✅ **トレーサビリティ**: 要件→詳細仕様の追跡可能性  

### **5. 想定利用者**

| ドキュメント | 主要利用者 | 利用目的 |
|-------------|-----------|----------|
| **既存仕様書** | PM, 企画, QA | 全体把握、要件確認 |
| **JSON階層フィルター仕様書** | 開発者, テックリード | 実装、技術検討 |

---

## 🚀 **推奨: この統合方針で進める理由**

1. **適切な責任分離**: 要件レベルと実装レベルの分離
2. **効率的な保守**: 各ドキュメントの独立性を保持
3. **優れた発見性**: 既存ドキュメントからの適切な導線
4. **開発者体験**: 実装に特化した詳細仕様として活用

この方針で進めることをお勧めします！ 